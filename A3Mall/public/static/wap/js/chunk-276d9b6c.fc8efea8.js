(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-276d9b6c"],{"0653":function(t,e,i){"use strict";i("68ef"),i("5c56")},"0a26":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("ad06"),s=i("78eb"),a=i("9884"),o=i("ea8e"),r=function(t){var e=t.parent,i=t.bem,r=t.role;return{mixins:[Object(a["a"])(e),s["a"]],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},direction:function(){return this.parent&&this.parent.direction||null},iconStyle:function(){var t=this.checkedColor||this.parent&&this.parent.checkedColor;if(t&&this.checked&&!this.isDisabled)return{borderColor:t,backgroundColor:t}},tabindex:function(){return this.isDisabled||"radio"===r&&!this.checked?-1:0}},methods:{onClick:function(t){var e=this,i=t.target,n=this.$refs.icon,s=n===i||n.contains(i);this.isDisabled||!s&&this.labelDisabled?this.$emit("click",t):(this.toggle(),setTimeout((function(){e.$emit("click",t)})))},genIcon:function(){var t=this.$createElement,e=this.checked,s=this.iconSize||this.parent&&this.parent.iconSize;return t("div",{ref:"icon",class:i("icon",[this.shape,{disabled:this.isDisabled,checked:e}]),style:{fontSize:Object(o["a"])(s)}},[this.slots("icon",{checked:e})||t(n["a"],{attrs:{name:"success"},style:this.iconStyle})])},genLabel:function(){var t=this.$createElement,e=this.slots();if(e)return t("span",{class:i("label",[this.labelPosition,{disabled:this.isDisabled}])},[e])}},render:function(){var t=arguments[0],e=[this.genIcon()];return"left"===this.labelPosition?e.unshift(this.genLabel()):e.push(this.genLabel()),t("div",{attrs:{role:r,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:i([{disabled:this.isDisabled,"label-disabled":this.labelDisabled},this.direction]),on:{click:this.onClick}},[e])}}}},2381:function(t,e,i){},"34e9":function(t,e,i){"use strict";var n=i("2638"),s=i.n(n),a=i("d282"),o=i("ba31"),r=i("b1d2"),c=Object(a["a"])("cell-group"),l=c[0],d=c[1];function u(t,e,i,n){var a,c=t("div",s()([{class:[d(),(a={},a[r["f"]]=e.border,a)]},Object(o["b"])(n,!0)]),[null==i.default?void 0:i.default()]);return e.title||i.title?t("div",[t("div",{class:d("title")},[i.title?i.title():e.title]),c]):c}u.props={title:String,border:{type:Boolean,default:!0}},e["a"]=l(u)},"417e":function(t,e,i){"use strict";var n=i("d282"),s=i("0a26"),a=Object(n["a"])("checkbox"),o=a[0],r=a[1];e["a"]=o({mixins:[Object(s["a"])({bem:r,role:"checkbox",parent:"vanCheckbox"})],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(t){this.parent?this.setParentValue(t):this.$emit("input",t)}}},watch:{value:function(t){this.$emit("change",t)}},methods:{toggle:function(t){var e=this;void 0===t&&(t=!this.checked),clearTimeout(this.toggleTask),this.toggleTask=setTimeout((function(){e.checked=t}))},setParentValue:function(t){var e=this.parent,i=e.value.slice();if(t){if(e.max&&i.length>=e.max)return;-1===i.indexOf(this.name)&&(i.push(this.name),e.$emit("input",i))}else{var n=i.indexOf(this.name);-1!==n&&(i.splice(n,1),e.$emit("input",i))}}}})},"42e1":function(t,e,i){"use strict";var n=i("5af3"),s=i.n(n);s.a},5246:function(t,e,i){"use strict";i("68ef"),i("9d70"),i("3743"),i("8a0b")},"54a3":function(t,e,i){},"5af3":function(t,e,i){},"5c56":function(t,e,i){},"6b41":function(t,e,i){"use strict";var n=i("d282"),s=i("b1d2"),a=i("ad06"),o=Object(n["a"])("nav-bar"),r=o[0],c=o[1];e["a"]=r({props:{title:String,fixed:Boolean,zIndex:[Number,String],leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,border:{type:Boolean,default:!0}},data:function(){return{height:null}},mounted:function(){this.placeholder&&this.fixed&&(this.height=this.$refs.navBar.getBoundingClientRect().height)},methods:{genLeft:function(){var t=this.$createElement,e=this.slots("left");return e||[this.leftArrow&&t(a["a"],{class:c("arrow"),attrs:{name:"arrow-left"}}),this.leftText&&t("span",{class:c("text")},[this.leftText])]},genRight:function(){var t=this.$createElement,e=this.slots("right");return e||(this.rightText?t("span",{class:c("text")},[this.rightText]):void 0)},genNavBar:function(){var t,e=this.$createElement;return e("div",{ref:"navBar",style:{zIndex:this.zIndex},class:[c({fixed:this.fixed}),(t={},t[s["b"]]=this.border,t)]},[e("div",{class:c("left"),on:{click:this.onClickLeft}},[this.genLeft()]),e("div",{class:[c("title"),"van-ellipsis"]},[this.slots("title")||this.title]),e("div",{class:c("right"),on:{click:this.onClickRight}},[this.genRight()])])},onClickLeft:function(t){this.$emit("click-left",t)},onClickRight:function(t){this.$emit("click-right",t)}},render:function(){var t=arguments[0];return this.placeholder&&this.fixed?t("div",{class:c("placeholder"),style:{height:this.height+"px"}},[this.genNavBar()]):this.genNavBar()}})},"78eb":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},"7cc0e":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-nav-bar",{attrs:{title:"确认订单","left-arrow":"",fixed:!0,placeholder:!0,"z-index":99999},on:{"click-left":t.prev}}),i("div",{staticClass:"top"},[i("span",{staticClass:"top-map"},[i("van-icon",{attrs:{name:"location-o",size:"18px",color:"#888"}})],1),i("div",{staticClass:"address",on:{click:function(e){t.showAddress=!0}}},[t.address.tel?i("div",{staticClass:"info"},[t.address.name?i("span",[t._v("收件人："+t._s(t.address.name))]):t._e(),t.address.tel?i("span",[t._v("手机号："+t._s(t.address.tel))]):t._e()]):t._e(),t.address.tel?t._e():i("div",{staticClass:"info"},[i("span",{staticStyle:{position:"relative",top:"-5px"}},[t._v("请选择地址")])]),t.address.address?i("div",{staticClass:"address-info"},[t._v(t._s(t.address.address))]):t._e()]),i("span",{staticClass:"arrow-right"},[i("van-icon",{attrs:{name:"arrow",size:"18px",color:"#888"}})],1)]),i("div",{staticClass:"goods"},[i("div",{staticClass:"title"},[i("span",[t._v("共"+t._s(t.orderData.item.length)+"件商品")])]),i("div",{staticClass:"goods-box"},t._l(t.orderData.item,(function(e,n){return i("div",{key:n,staticClass:"goods-item clear"},[i("div",{staticClass:"goods-img"},[i("img",{attrs:{src:e.thumb_image}})]),i("div",{staticClass:"goods-info"},[i("div",{staticClass:"t"},[i("span",[t._v(t._s(e.title))]),i("span",[t._v("￥"+t._s(e.sell_price))])]),i("div",{staticClass:"b"},[e.goods_array?i("span",t._l(e.goods_array,(function(e,n){return i("i",{key:n},[t._v(" "+t._s(e.name)+"："+t._s(e.value)+" ")])})),0):t._e(),i("span",[t._v("× "+t._s(e.goods_nums))])])])])})),0)]),i("div",{staticClass:"order"},[t._m(0),1!=t.orderData.type?i("van-coupon-cell",{attrs:{coupons:t.coupons,"chosen-coupon":t.chosenCoupon},on:{click:function(e){t.showCoupon=!0}}}):t._e(),i("van-cell-group",[i("van-cell",{attrs:{title:"商品金额：",value:"￥"+t.orderData.real_amount}}),i("van-cell",{attrs:{title:"运费金额：",value:"￥"+t.orderData.real_freight}}),t.orderData.real_point>0?i("van-cell",{attrs:{title:"需要积分：",value:t.orderData.real_point+"积分","value-class":"money"}}):t._e(),i("van-cell",{attrs:{title:"订单总额：",value:"￥"+t.orderData.payable_amount,"value-class":"money"}})],1)],1),i("div",{staticClass:"order"},[t._m(1),i("van-field",{attrs:{rows:"2",autosize:"",label:"留言",type:"textarea",maxlength:"100",placeholder:"请输入留言","show-word-limit":""},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1),i("div",{staticClass:"order"},[t._m(2),i("div",{staticClass:"payment-box"},[i("div",{staticClass:"payment-item",on:{click:function(e){return t.selectPayment("wechat")}}},[t._m(3),i("span",{class:{activeColor:"wechat"==t.payment}},[t._v("微信支付")]),i("span",{class:{active:"wechat"==t.payment}},[i("i",{staticClass:"fa fa-check"})])]),i("div",{staticClass:"payment-item",on:{click:function(e){return t.selectPayment("balance")}}},[t._m(4),i("span",{class:{activeColor:"balance"==t.payment}},[t._v("余额支付"),i("i",[t._v("可用余额: ￥"+t._s(t.orderData.users_price)+"元")])]),i("span",{class:{active:"balance"==t.payment}},[i("i",{staticClass:"fa fa-check"})])])])]),i("div",{staticClass:"operation-placeholder"}),i("div",{staticClass:"operation"},[i("span",{staticClass:"amount"},[i("i",[t._v("合计：")]),i("i",[t._v("￥"+t._s(t.orderData.order_amount))])]),i("span",{staticClass:"pay",on:{click:t.onOrderSubmit}},[t._v("提交订单")])]),i("van-popup",{staticStyle:{height:"50%"},attrs:{closeable:"","close-icon":"close",position:"bottom"},model:{value:t.showAddress,callback:function(e){t.showAddress=e},expression:"showAddress"}},[i("van-address-list",{attrs:{list:t.addressList,"default-tag-text":"默认"},on:{add:t.onAdd,"click-item":t.selectAddress},model:{value:t.chosenAddressId,callback:function(e){t.chosenAddressId=e},expression:"chosenAddressId"}})],1),i("van-popup",{staticStyle:{height:"70%","padding-top":"4px"},attrs:{closeable:"","close-icon":"close",position:"bottom"},model:{value:t.showCoupon,callback:function(e){t.showCoupon=e},expression:"showCoupon"}},[i("van-coupon-list",{attrs:{coupons:t.coupons,"chosen-coupon":t.chosenCoupon,"disabled-coupons":t.disabledCoupons,"show-exchange-bar":!1},on:{change:t.onChange}})],1)],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",[t._v("订单信息")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",[t._v("备注内容")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",[t._v("支付方式")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("i",{staticClass:"fa fa-weixin",staticStyle:{color:"#fff","background-color":"#41b035"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("i",{staticClass:"fa fa-jpy",staticStyle:{color:"#fff","background-color":"#fe960f"}})])}],a=(i("b0c0"),i("ac1f"),i("5319"),i("e7e5"),i("d399")),o=i("ade3"),r=(i("68ef"),i("9d70"),i("3743"),i("dde9"),i("9b7e"),i("1a04"),i("e3b3"),i("bc1b"),i("dc1b"),i("e2c8"),i("2638")),c=i.n(r),l=i("d282"),d=i("ba31"),u=i("b650"),h=i("78eb"),f=i("9884"),p=Object(l["a"])("radio-group"),b=p[0],v=p[1],m=b({mixins:[Object(f["b"])("vanRadio"),h["a"]],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(t){this.$emit("change",t)}},render:function(){var t=arguments[0];return t("div",{class:v([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}}),g=i("c31d"),y=i("b1d2"),x=i("ad06"),C=Object(l["a"])("tag"),k=C[0],O=C[1];function S(t,e,i,n){var s,a,o=e.type,r=e.mark,l=e.plain,u=e.color,h=e.round,f=e.size,p=l?"color":"backgroundColor",b=(s={},s[p]=u,s);e.textColor&&(b.color=e.textColor);var v={mark:r,plain:l,round:h};f&&(v[f]=f);var m=e.closeable&&t(x["a"],{attrs:{name:"cross"},class:O("close"),on:{click:function(t){t.stopPropagation(),Object(d["a"])(n,"close")}}});return t("transition",{attrs:{name:e.closeable?"van-fade":null}},[t("span",c()([{key:"content",style:b,class:[O([v,o]),(a={},a[y["d"]]=l,a)]},Object(d["b"])(n,!0)]),[null==i.default?void 0:i.default(),m])])}S.props={size:String,mark:Boolean,color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean,type:{type:String,default:"default"}};var j=k(S),w=i("7744"),B=i("0a26"),_=Object(l["a"])("radio"),T=_[0],$=_[1],I=T({mixins:[Object(B["a"])({bem:$,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}}),A=Object(l["a"])("address-item"),D=A[0],N=A[1];function L(t,e,i,n){var s=e.disabled,a=e.switchable;function o(){a&&Object(d["a"])(n,"select"),Object(d["a"])(n,"click")}var r=function(){return t(x["a"],{attrs:{name:"edit"},class:N("edit"),on:{click:function(t){t.stopPropagation(),Object(d["a"])(n,"edit"),Object(d["a"])(n,"click")}}})};function l(){if(e.data.isDefault&&e.defaultTagText)return t(j,{attrs:{type:"danger",round:!0},class:N("tag")},[e.defaultTagText])}function u(){var i=e.data,n=[t("div",{class:N("name")},[i.name+" "+i.tel,l()]),t("div",{class:N("address")},[i.address])];return a&&!s?t(I,{attrs:{name:i.id,iconSize:18}},[n]):n}return t("div",{class:N({disabled:s}),on:{click:o}},[t(w["a"],c()([{attrs:{border:!1,valueClass:N("value")},scopedSlots:{default:u,"right-icon":r}},Object(d["b"])(n)])),null==i.bottom?void 0:i.bottom(Object(g["a"])(Object(g["a"])({},e.data),{},{disabled:s}))])}L.props={data:Object,disabled:Boolean,switchable:Boolean,defaultTagText:String};var z=D(L),E=Object(l["a"])("address-list"),P=E[0],R=E[1],F=E[2];function H(t,e,i,n){function s(s,a){if(s)return s.map((function(s,o){return t(z,{attrs:{data:s,disabled:a,switchable:e.switchable,defaultTagText:e.defaultTagText},key:s.id,scopedSlots:{bottom:i["item-bottom"]},on:{select:function(){Object(d["a"])(n,a?"select-disabled":"select",s,o),a||Object(d["a"])(n,"input",s.id)},edit:function(){Object(d["a"])(n,a?"edit-disabled":"edit",s,o)},click:function(){Object(d["a"])(n,"click-item",s,o)}}})}))}var a=s(e.list),o=s(e.disabledList,!0);return t("div",c()([{class:R()},Object(d["b"])(n)]),[null==i.top?void 0:i.top(),t(m,{attrs:{value:e.value}},[a]),e.disabledText&&t("div",{class:R("disabled-text")},[e.disabledText]),o,null==i.default?void 0:i.default(),t("div",{class:R("bottom")},[t(u["a"],{attrs:{round:!0,block:!0,type:"danger",text:e.addButtonText||F("add")},class:R("add"),on:{click:function(){Object(d["a"])(n,"add")}}})])])}H.props={list:Array,value:[Number,String],disabledList:Array,disabledText:String,addButtonText:String,defaultTagText:String,switchable:{type:Boolean,default:!0}};var M,V=P(H),q=(i("2381"),i("54a3"),i("1146"),i("f319"),i("ae9e"),i("b807"),i("8238"),i("a142")),W=i("48f4"),X=Object(l["a"])("tab"),G=X[0],J=X[1],U=G({mixins:[Object(f["a"])("vanTabs")],props:Object(g["a"])(Object(g["a"])({},W["c"]),{},{dot:Boolean,name:[Number,String],info:[Number,String],badge:[Number,String],title:String,titleStyle:null,disabled:Boolean}),data:function(){return{inited:!1}},computed:{computedName:function(){return Object(q["b"])(this.name)?this.name:this.index},isActive:function(){var t=this.computedName===this.parent.currentName;return t&&(this.inited=!0),t}},watch:{title:function(){this.parent.setLine()},inited:function(t){var e=this;this.parent.lazyRender&&t&&this.$nextTick((function(){e.parent.$emit("rendered",e.computedName,e.title)}))}},render:function(t){var e=this.slots,i=this.parent,n=this.isActive,s=this.inited||i.scrollspy||!i.lazyRender,a=i.scrollspy||n,o=s?e():t();return i.animated?t("div",{attrs:{role:"tabpanel","aria-hidden":!n},class:J("pane-wrapper",{inactive:!n})},[t("div",{class:J("pane")},[o])]):t("div",{directives:[{name:"show",value:a}],attrs:{role:"tabpanel"},class:J("pane")},[o])}}),Y=i("ea8e"),K=i("4598"),Q=i("a8c1");function Z(t,e,i){Object(K["a"])(M);var n=0,s=t.scrollLeft,a=0===i?1:Math.round(1e3*i/16);function o(){t.scrollLeft+=(e-s)/a,++n<a&&(M=Object(K["c"])(o))}o()}function tt(t,e,i,n){var s=Object(Q["c"])(t),a=s<e,o=0===i?1:Math.round(1e3*i/16),r=(e-s)/o;function c(){s+=r,(a&&s>e||!a&&s<e)&&(s=e),Object(Q["h"])(t,s),a&&s<e||!a&&s>e?Object(K["c"])(c):n&&Object(K["c"])(n)}c()}var et=i("02de"),it=i("1325"),nt=i("5fbe"),st=i("6f2f"),at=Object(l["a"])("tab"),ot=at[0],rt=at[1],ct=ot({props:{dot:Boolean,type:String,info:[Number,String],color:String,title:String,isActive:Boolean,ellipsis:Boolean,disabled:Boolean,scrollable:Boolean,activeColor:String,inactiveColor:String,swipeThreshold:[Number,String]},computed:{style:function(){var t={},e=this.color,i=this.isActive,n="card"===this.type;e&&n&&(t.borderColor=e,this.disabled||(i?t.backgroundColor=e:t.color=e));var s=i?this.activeColor:this.inactiveColor;return s&&(t.color=s),this.scrollable&&this.ellipsis&&(t.flexBasis=88/this.swipeThreshold+"%"),t}},methods:{onClick:function(){this.$emit("click")},genText:function(){var t=this.$createElement,e=t("span",{class:rt("text",{ellipsis:this.ellipsis})},[this.slots()||this.title]);return this.dot||Object(q["b"])(this.info)&&""!==this.info?t("span",{class:rt("text-wrapper")},[e,t(st["a"],{attrs:{dot:this.dot,info:this.info}})]):e}},render:function(){var t=arguments[0];return t("div",{attrs:{role:"tab","aria-selected":this.isActive},class:[rt({active:this.isActive,disabled:this.disabled,complete:!this.ellipsis})],style:this.style,on:{click:this.onClick}},[this.genText()])}}),lt=Object(l["a"])("sticky"),dt=lt[0],ut=lt[1],ht=dt({mixins:[Object(nt["a"])((function(t,e){if(this.scroller||(this.scroller=Object(Q["d"])(this.$el)),this.observer){var i=e?"observe":"unobserve";this.observer[i](this.$el)}t(this.scroller,"scroll",this.onScroll,!0),this.onScroll()}))],props:{zIndex:[Number,String],container:null,offsetTop:{type:[Number,String],default:0}},data:function(){return{fixed:!1,height:0,transform:0}},computed:{offsetTopPx:function(){return Object(Y["b"])(this.offsetTop)},style:function(){if(this.fixed){var t={};return Object(q["b"])(this.zIndex)&&(t.zIndex=this.zIndex),this.offsetTopPx&&this.fixed&&(t.top=this.offsetTopPx+"px"),this.transform&&(t.transform="translate3d(0, "+this.transform+"px, 0)"),t}}},created:function(){var t=this;!q["f"]&&window.IntersectionObserver&&(this.observer=new IntersectionObserver((function(e){e[0].intersectionRatio>0&&t.onScroll()}),{root:document.body}))},methods:{onScroll:function(){var t=this;if(!Object(et["a"])(this.$el)){this.height=this.$el.offsetHeight;var e=this.container,i=this.offsetTopPx,n=Object(Q["c"])(window),s=Object(Q["a"])(this.$el),a=function(){t.$emit("scroll",{scrollTop:n,isFixed:t.fixed})};if(e){var o=s+e.offsetHeight;if(n+i+this.height>o){var r=this.height+n-o;return r<this.height?(this.fixed=!0,this.transform=-(r+i)):this.fixed=!1,void a()}}n+i>s?(this.fixed=!0,this.transform=0):this.fixed=!1,a()}}},render:function(){var t=arguments[0],e=this.fixed,i={height:e?this.height+"px":null};return t("div",{style:i},[t("div",{class:ut({fixed:e}),style:this.style},[this.slots()])])}}),ft=i("3875"),pt=Object(l["a"])("tabs"),bt=pt[0],vt=pt[1],mt=50,gt=bt({mixins:[ft["a"]],props:{count:Number,duration:[Number,String],animated:Boolean,swipeable:Boolean,currentIndex:Number},computed:{style:function(){if(this.animated)return{transform:"translate3d("+-1*this.currentIndex*100+"%, 0, 0)",transitionDuration:this.duration+"s"}},listeners:function(){if(this.swipeable)return{touchstart:this.touchStart,touchmove:this.touchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}}},methods:{onTouchEnd:function(){var t=this.direction,e=this.deltaX,i=this.currentIndex;"horizontal"===t&&this.offsetX>=mt&&(e>0&&0!==i?this.$emit("change",i-1):e<0&&i!==this.count-1&&this.$emit("change",i+1))},genChildren:function(){var t=this.$createElement;return this.animated?t("div",{class:vt("track"),style:this.style},[this.slots()]):this.slots()}},render:function(){var t=arguments[0];return t("div",{class:vt("content",{animated:this.animated}),on:Object(g["a"])({},this.listeners)},[this.genChildren()])}}),yt=Object(l["a"])("tabs"),xt=yt[0],Ct=yt[1],kt=xt({mixins:[Object(f["b"])("vanTabs"),Object(nt["a"])((function(t){this.scroller||(this.scroller=Object(Q["d"])(this.$el)),t(window,"resize",this.resize,!0),this.scrollspy&&t(this.scroller,"scroll",this.onScroll,!0)}))],model:{prop:"active"},props:{color:String,sticky:Boolean,animated:Boolean,swipeable:Boolean,scrollspy:Boolean,background:String,lineWidth:[Number,String],lineHeight:[Number,String],titleActiveColor:String,titleInactiveColor:String,type:{type:String,default:"line"},active:{type:[Number,String],default:0},border:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},duration:{type:[Number,String],default:.3},offsetTop:{type:[Number,String],default:0},lazyRender:{type:Boolean,default:!0},swipeThreshold:{type:[Number,String],default:4}},data:function(){return{position:"",currentIndex:null,lineStyle:{backgroundColor:this.color}}},computed:{scrollable:function(){return this.children.length>this.swipeThreshold||!this.ellipsis},navStyle:function(){return{borderColor:this.color,background:this.background}},currentName:function(){var t=this.children[this.currentIndex];if(t)return t.computedName},scrollOffset:function(){return this.sticky?+this.offsetTop+this.tabHeight:0}},watch:{color:"setLine",active:function(t){t!==this.currentName&&this.setCurrentIndexByName(t)},children:function(){var t=this;this.setCurrentIndexByName(this.currentName||this.active),this.setLine(),this.$nextTick((function(){t.scrollIntoView(!0)}))},currentIndex:function(){this.scrollIntoView(),this.setLine(),this.stickyFixed&&!this.scrollspy&&Object(Q["g"])(Math.ceil(Object(Q["a"])(this.$el)-this.offsetTop))},scrollspy:function(t){t?Object(it["b"])(this.scroller,"scroll",this.onScroll,!0):Object(it["a"])(this.scroller,"scroll",this.onScroll)}},mounted:function(){this.init()},activated:function(){this.init(),this.setLine()},methods:{resize:function(){this.setLine()},init:function(){var t=this;this.$nextTick((function(){t.inited=!0,t.tabHeight=Object(Q["e"])(t.$refs.wrap),t.scrollIntoView(!0)}))},setLine:function(){var t=this,e=this.inited;this.$nextTick((function(){var i=t.$refs.titles;if(i&&i[t.currentIndex]&&"line"===t.type&&!Object(et["a"])(t.$el)){var n=i[t.currentIndex].$el,s=t.lineWidth,a=t.lineHeight,o=Object(q["b"])(s)?s:n.offsetWidth/2,r=n.offsetLeft+n.offsetWidth/2,c={width:Object(Y["a"])(o),backgroundColor:t.color,transform:"translateX("+r+"px) translateX(-50%)"};if(e&&(c.transitionDuration=t.duration+"s"),Object(q["b"])(a)){var l=Object(Y["a"])(a);c.height=l,c.borderRadius=l}t.lineStyle=c}}))},setCurrentIndexByName:function(t){var e=this.children.filter((function(e){return e.computedName===t})),i=(this.children[0]||{}).index||0;this.setCurrentIndex(e.length?e[0].index:i)},setCurrentIndex:function(t){if(t=this.findAvailableTab(t),Object(q["b"])(t)&&t!==this.currentIndex){var e=null!==this.currentIndex;this.currentIndex=t,this.$emit("input",this.currentName),e&&this.$emit("change",this.currentName,this.children[t].title)}},findAvailableTab:function(t){var e=t<this.currentIndex?-1:1;while(t>=0&&t<this.children.length){if(!this.children[t].disabled)return t;t+=e}},onClick:function(t){var e=this.children[t],i=e.title,n=e.disabled,s=e.computedName;n?this.$emit("disabled",s,i):(this.setCurrentIndex(t),this.scrollToCurrentContent(),this.$emit("click",s,i))},scrollIntoView:function(t){var e=this.$refs.titles;if(this.scrollable&&e&&e[this.currentIndex]){var i=this.$refs.nav,n=e[this.currentIndex].$el,s=n.offsetLeft-(i.offsetWidth-n.offsetWidth)/2;Z(i,s,t?0:+this.duration)}},onSticktScroll:function(t){this.stickyFixed=t.isFixed,this.$emit("scroll",t)},scrollToCurrentContent:function(){var t=this;if(this.scrollspy){var e=this.children[this.currentIndex],i=null==e?void 0:e.$el;if(i){var n=Object(Q["a"])(i,this.scroller)-this.scrollOffset;this.lockScroll=!0,tt(this.scroller,n,+this.duration,(function(){t.lockScroll=!1}))}}},onScroll:function(){if(this.scrollspy&&!this.lockScroll){var t=this.getCurrentIndexOnScroll();this.setCurrentIndex(t)}},getCurrentIndexOnScroll:function(){for(var t=this.children,e=0;e<t.length;e++){var i=Object(Q["f"])(t[e].$el);if(i>this.scrollOffset)return 0===e?0:e-1}return t.length-1}},render:function(){var t,e=this,i=arguments[0],n=this.type,s=this.ellipsis,a=this.animated,o=this.scrollable,r=this.children.map((function(t,a){return i(ct,{ref:"titles",refInFor:!0,attrs:{type:n,dot:t.dot,info:Object(q["b"])(t.badge)?t.badge:t.info,title:t.title,color:e.color,isActive:a===e.currentIndex,ellipsis:s,disabled:t.disabled,scrollable:o,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,swipeThreshold:e.swipeThreshold},style:t.titleStyle,scopedSlots:{default:function(){return t.slots("title")}},on:{click:function(){e.onClick(a),Object(W["b"])(t.$router,t)}}})})),c=i("div",{ref:"wrap",class:[Ct("wrap",{scrollable:o}),(t={},t[y["f"]]="line"===n&&this.border,t)]},[i("div",{ref:"nav",attrs:{role:"tablist"},class:Ct("nav",[n]),style:this.navStyle},[this.slots("nav-left"),r,"line"===n&&i("div",{class:Ct("line"),style:this.lineStyle}),this.slots("nav-right")])]);return i("div",{class:Ct([n])},[this.sticky?i(ht,{attrs:{container:this.$el,offsetTop:this.offsetTop},on:{scroll:this.onSticktScroll}},[c]):c,i(gt,{attrs:{count:this.children.length,animated:a,duration:this.duration,swipeable:this.swipeable,currentIndex:this.currentIndex},on:{change:this.setCurrentIndex}},[this.slots()])])}}),Ot=i("565f"),St=i("68ed"),jt=i("417e"),wt=Object(l["a"])("coupon"),Bt=wt[0],_t=wt[1],Tt=wt[2];function $t(t){var e=new Date(1e3*t);return e.getFullYear()+"."+Object(St["b"])(e.getMonth()+1)+"."+Object(St["b"])(e.getDate())}function It(t){return(t/10).toFixed(t%10===0?0:1)}function At(t){return(t/100).toFixed(t%100===0?0:t%10===0?1:2)}var Dt=Bt({props:{coupon:Object,chosen:Boolean,disabled:Boolean,currency:{type:String,default:"¥"}},computed:{validPeriod:function(){var t=this.coupon,e=t.startAt,i=t.endAt;return $t(e)+" - "+$t(i)},faceAmount:function(){var t=this.coupon;if(t.valueDesc)return t.valueDesc+"<span>"+(t.unitDesc||"")+"</span>";if(t.denominations){var e=At(t.denominations);return"<span>"+this.currency+"</span> "+e}return t.discount?Tt("discount",It(t.discount)):""},conditionMessage:function(){var t=At(this.coupon.originCondition);return"0"===t?Tt("unlimited"):Tt("condition",t)}},render:function(){var t=arguments[0],e=this.coupon,i=this.disabled,n=i&&e.reason||e.description;return t("div",{class:_t({disabled:i})},[t("div",{class:_t("content")},[t("div",{class:_t("head")},[t("h2",{class:_t("amount"),domProps:{innerHTML:this.faceAmount}}),t("p",{class:_t("condition")},[this.coupon.condition||this.conditionMessage])]),t("div",{class:_t("body")},[t("p",{class:_t("name")},[e.name]),t("p",{class:_t("valid")},[this.validPeriod]),!this.disabled&&t(jt["a"],{attrs:{size:18,value:this.chosen,checkedColor:y["h"]},class:_t("corner")})])]),n&&t("p",{class:_t("description")},[n])])}}),Nt=Object(l["a"])("coupon-list"),Lt=Nt[0],zt=Nt[1],Et=Nt[2],Pt="https://img.yzcdn.cn/vant/coupon-empty.png",Rt=Lt({model:{prop:"code"},props:{code:String,closeButtonText:String,inputPlaceholder:String,enabledTitle:String,disabledTitle:String,exchangeButtonText:String,exchangeButtonLoading:Boolean,exchangeButtonDisabled:Boolean,exchangeMinLength:{type:Number,default:1},chosenCoupon:{type:Number,default:-1},coupons:{type:Array,default:function(){return[]}},disabledCoupons:{type:Array,default:function(){return[]}},displayedCouponIndex:{type:Number,default:-1},showExchangeBar:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},showCount:{type:Boolean,default:!0},currency:{type:String,default:"¥"},emptyImage:{type:String,default:Pt}},data:function(){return{tab:0,winHeight:window.innerHeight,currentCode:this.code||""}},computed:{buttonDisabled:function(){return!this.exchangeButtonLoading&&(this.exchangeButtonDisabled||!this.currentCode||this.currentCode.length<this.exchangeMinLength)},listStyle:function(){return{height:this.winHeight-(this.showExchangeBar?140:94)+"px"}}},watch:{code:function(t){this.currentCode=t},currentCode:function(t){this.$emit("input",t)},displayedCouponIndex:"scrollToShowCoupon"},mounted:function(){this.scrollToShowCoupon(this.displayedCouponIndex)},methods:{onClickExchangeButton:function(){this.$emit("exchange",this.currentCode),this.code||(this.currentCode="")},scrollToShowCoupon:function(t){var e=this;-1!==t&&this.$nextTick((function(){var i=e.$refs,n=i.card,s=i.list;s&&n&&n[t]&&(s.scrollTop=n[t].$el.offsetTop-100)}))},genEmpty:function(){var t=this.$createElement;return t("div",{class:zt("empty")},[t("img",{attrs:{src:this.emptyImage}}),t("p",[Et("empty")])])},genExchangeButton:function(){var t=this.$createElement;return t(u["a"],{attrs:{plain:!0,type:"danger",text:this.exchangeButtonText||Et("exchange"),loading:this.exchangeButtonLoading,disabled:this.buttonDisabled},class:zt("exchange"),on:{click:this.onClickExchangeButton}})}},render:function(){var t=this,e=arguments[0],i=this.coupons,n=this.disabledCoupons,s=this.showCount?" ("+i.length+")":"",a=(this.enabledTitle||Et("enable"))+s,o=this.showCount?" ("+n.length+")":"",r=(this.disabledTitle||Et("disabled"))+o,c=this.showExchangeBar&&e("div",{class:zt("exchange-bar")},[e(Ot["a"],{attrs:{clearable:!0,border:!1,placeholder:this.inputPlaceholder||Et("placeholder"),maxlength:"20"},class:zt("field"),model:{value:t.currentCode,callback:function(e){t.currentCode=e}}}),this.genExchangeButton()]),l=function(e){return function(){return t.$emit("change",e)}},d=e(U,{attrs:{title:a}},[e("div",{class:zt("list",{"with-bottom":this.showCloseButton}),style:this.listStyle},[i.map((function(i,n){return e(Dt,{ref:"card",key:i.id,attrs:{coupon:i,currency:t.currency,chosen:n===t.chosenCoupon},nativeOn:{click:l(n)}})})),!i.length&&this.genEmpty()])]),h=e(U,{attrs:{title:r}},[e("div",{class:zt("list",{"with-bottom":this.showCloseButton}),style:this.listStyle},[n.map((function(i){return e(Dt,{attrs:{disabled:!0,coupon:i,currency:t.currency},key:i.id})})),!n.length&&this.genEmpty()])]);return e("div",{class:zt()},[c,e(kt,{class:zt("tab"),attrs:{border:!1},model:{value:t.tab,callback:function(e){t.tab=e}}},[d,h]),e("div",{class:zt("bottom")},[e(u["a"],{directives:[{name:"show",value:this.showCloseButton}],attrs:{round:!0,type:"danger",block:!0,text:this.closeButtonText||Et("close")},class:zt("close"),on:{click:l(-1)}})])])}}),Ft=(i("ed61"),Object(l["a"])("coupon-cell")),Ht=Ft[0],Mt=Ft[1],Vt=Ft[2];function qt(t){var e=t.coupons,i=t.chosenCoupon,n=t.currency,s=e[+i];if(s){var a=s.value||s.denominations||0;return"-"+n+(a/100).toFixed(2)}return 0===e.length?Vt("tips"):Vt("count",e.length)}function Wt(t,e,i,n){var s=e.coupons[+e.chosenCoupon]?"van-coupon-cell--selected":"",a=qt(e);return t(w["a"],c()([{class:Mt(),attrs:{value:a,title:e.title||Vt("title"),border:e.border,isLink:e.editable,valueClass:s}},Object(d["b"])(n,!0)]))}Wt.model={prop:"chosenCoupon"},Wt.props={title:String,coupons:{type:Array,default:function(){return[]}},currency:{type:String,default:"¥"},border:{type:Boolean,default:!0},editable:{type:Boolean,default:!0},chosenCoupon:{type:[Number,String],default:-1}};var Xt,Gt=Ht(Wt),Jt=(i("8a58"),i("e41f")),Ut=(i("be7f"),i("c3a6"),i("0653"),i("34e9")),Yt=(i("c194"),i("5246"),i("6b41")),Kt={name:"CartConfirm",components:(Xt={},Object(o["a"])(Xt,Yt["a"].name,Yt["a"]),Object(o["a"])(Xt,w["a"].name,w["a"]),Object(o["a"])(Xt,Ut["a"].name,Ut["a"]),Object(o["a"])(Xt,x["a"].name,x["a"]),Object(o["a"])(Xt,Ot["a"].name,Ot["a"]),Object(o["a"])(Xt,Jt["a"].name,Jt["a"]),Object(o["a"])(Xt,Gt.name,Gt),Object(o["a"])(Xt,Rt.name,Rt),Object(o["a"])(Xt,V.name,V),Xt),data:function(){return{address:{id:"",name:"",tel:"",address:""},showAddress:!1,chosenAddressId:"0",bonusId:"0",addressList:[],orderData:{item:{},real_amount:0,real_freight:0,payable_amount:0,order_amount:0,users_price:0,real_point:0,type:0},remarks:"",payment:"wechat",showCoupon:!1,chosenCoupon:-1,coupons:[],disabledCoupons:[],params:null,orderBtnFlag:!1}},created:function(){var t=this.$route.query.type,e=this.$route.query.id,i={id:e,type:t};void 0==t&&this.$tools.prev(),this.$tools.in_array(t,["buy","point","second","regiment","special","activity"])&&(i.sku_id=this.$route.query.sku_id,i.num=this.$route.query.num,this.$route.query.kid&&(i.kid=this.$route.query.kid)),this.params=i,this.onLoadOrder()},methods:{onLoadOrder:function(){var t=this;a["a"].loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.$http.getCartConfirm(this.params).then((function(e){if(a["a"].clear(),e.status){t.orderData=e.data;var i=t.$storage.get("ORDER_ADDRESS_ID");if(i){for(var n in e.data.address.list)if(e.data.address.list[n].id==i){t.chosenAddressId=e.data.address.list[n].id,t.address=e.data.address.list[n];break}}else e.data.address.default&&(t.chosenAddressId=e.data.address.default.id,t.address=e.data.address.default);e.data.address.list.length&&(t.addressList=e.data.address.list),t.coupons=e.data.bonus.y,t.disabledCoupons=e.data.bonus.n}else Object(a["a"])(e.info)}))},prev:function(){this.$tools.prev()},onOrderSubmit:function(){var t=this;if(this.orderBtnFlag)return!1;this.orderBtnFlag=!0,a["a"].loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0});var e={};Object.assign(e,{id:this.params.id,type:this.params.type,address_id:this.chosenAddressId,bonus_id:this.bonusId,payment:this.payment,remarks:this.remarks,source:this.$tools.isWeiXin()?2:1,url:document.location.href},this.params),this.$http.createOrder(e).then((function(e){a["a"].clear(),e.status?t.resultOrderData(e.data):Object(a["a"])(e.info),t.orderBtnFlag=!1})).catch((function(e){a["a"].clear(),Object(a["a"])("网络连接错误，请检查网络是否可用"),t.orderBtnFlag=!1}))},resultOrderData:function(t){switch(this.$store.commit("UPDATECART",t.shop_count),t.pay+""){case"0":this.$router.replace("/order/detail/"+t.order_id);break;case"1":this.$wx.config(t.result.config);var e=t.result.options;e.success=function(){var e=this;Object(a["a"])("支付成功"),setTimeout((function(){e.$router.replace("/order/detail/"+t.order_id)}),1500)},this.$wx.chooseWXPay(e);break;case"2":location.href=t.result.url+"&redirect_url="+location.origin+"/order/detail/"+t.order_id;break;case"99":this.$storage.set("order_msg",t.msg),this.$storage.set("order_id",t.order_id),this.$router.replace("/cart/info");break}},selectPayment:function(t){this.payment=t},onChange:function(t){this.showCoupon=!1,this.chosenCoupon=t,this.params.bonus_id=-1!=t?this.coupons[t].id:0,this.bonusId=this.params.bonus_id,this.onLoadOrder()},onAdd:function(){this.$router.push({path:"/ucenter/address/add"})},selectAddress:function(t,e){this.showAddress=!1,this.chosenAddressId=this.addressList[e].id,this.params.address_id=this.chosenAddressId,this.address=this.addressList[e],this.onLoadOrder()}}},Qt=Kt,Zt=(i("42e1"),i("2877")),te=Object(Zt["a"])(Qt,n,s,!1,null,"44b1afc6",null);e["default"]=te.exports},8238:function(t,e,i){},"8a0b":function(t,e,i){},"8a58":function(t,e,i){"use strict";i("68ef"),i("a71a"),i("9d70"),i("3743"),i("4d75")},"9b7e":function(t,e,i){},ae9e:function(t,e,i){},b650:function(t,e,i){"use strict";var n=i("c31d"),s=i("2638"),a=i.n(s),o=i("d282"),r=i("ba31"),c=i("b1d2"),l=i("48f4"),d=i("ad06"),u=i("543e"),h=Object(o["a"])("button"),f=h[0],p=h[1];function b(t,e,i,n){var s,o=e.tag,h=e.icon,f=e.type,b=e.color,v=e.plain,m=e.disabled,g=e.loading,y=e.hairline,x=e.loadingText,C={};function k(t){g||m||(Object(r["a"])(n,"click",t),Object(l["a"])(n))}function O(t){Object(r["a"])(n,"touchstart",t)}b&&(C.color=v?b:c["i"],v||(C.background=b),-1!==b.indexOf("gradient")?C.border=0:C.borderColor=b);var S=[p([f,e.size,{plain:v,loading:g,disabled:m,hairline:y,block:e.block,round:e.round,square:e.square}]),(s={},s[c["d"]]=y,s)];function j(){var n,s=[];return g?s.push(t(u["a"],{class:p("loading"),attrs:{size:e.loadingSize,type:e.loadingType,color:"currentColor"}})):h&&s.push(t(d["a"],{attrs:{name:h,classPrefix:e.iconPrefix},class:p("icon")})),n=g?x:i.default?i.default():e.text,n&&s.push(t("span",{class:p("text")},[n])),s}return t(o,a()([{style:C,class:S,attrs:{type:e.nativeType,disabled:m},on:{click:k,touchstart:O}},Object(r["b"])(n)]),[t("div",{class:p("content")},[j()])])}b.props=Object(n["a"])(Object(n["a"])({},l["c"]),{},{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}}),e["a"]=f(b)},b807:function(t,e,i){},bc1b:function(t,e,i){},be7f:function(t,e,i){"use strict";i("68ef"),i("9d70"),i("3743"),i("1a04"),i("1146")},dc1b:function(t,e,i){},dde9:function(t,e,i){},e2c8:function(t,e,i){},e41f:function(t,e,i){"use strict";var n=i("d282"),s=i("a142"),a=i("6605"),o=i("ad06"),r=Object(n["a"])("popup"),c=r[0],l=r[1];e["a"]=c({mixins:[Object(a["a"])()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(i){return t.$emit(e,i)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},render:function(){var t,e=arguments[0];if(this.shouldRender){var i=this.round,n=this.position,a=this.duration,r="center"===n,c=this.transition||(r?"van-fade":"van-popup-slide-"+n),d={};if(Object(s["b"])(a)){var u=r?"animationDuration":"transitionDuration";d[u]=a+"s"}return e("transition",{attrs:{name:c},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:d,class:l((t={round:i},t[n]=n,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(o["a"],{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:l("close-icon",this.closeIconPosition),on:{click:this.close}})])])}}})},ed61:function(t,e,i){},f319:function(t,e,i){}}]);