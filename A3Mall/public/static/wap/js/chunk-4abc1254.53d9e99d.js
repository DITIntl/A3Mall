(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4abc1254"],{a69b:function(t,e,o){"use strict";var s=o("e928"),a=o.n(s);a.a},e037:function(t,e,o){"use strict";o.r(e);var s,a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("van-nav-bar",{attrs:{title:"商品详情","left-arrow":"",fixed:!0,placeholder:!0,"z-index":9999},on:{"click-left":t.prev}}),o("div",{style:"height:"+t.clientHeight+"px"},[o("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefresh,callback:function(e){t.isRefresh=e},expression:"isRefresh"}},[o("van-swipe",{staticClass:"swiper-box",attrs:{autoplay:3e3},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[o("div",{staticClass:"custom-indicator"},[t._v(" "+t._s(t.current+1)+" / "+t._s(t.images.length)+" ")])]},proxy:!0}])},t._l(t.images,(function(t,e){return o("van-swipe-item",{key:e},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"image"}]})])})),1),o("div",{staticClass:"goods-info clear"},[o("div",{staticClass:"price"},[o("span",[t._v("￥"),o("i",[t._v(t._s(t.products.sell_price))])])]),o("div",{staticClass:"title"},[t._v(" "+t._s(t.products.title)+" ")]),o("div",{staticClass:"goods-info-box"},[o("span",[t._v("￥"),o("i",[t._v(t._s(t.products.market_price))])]),o("span",[t._v("库存: "+t._s(t.products.store_nums)+"件")]),o("span",[t._v("销量: "+t._s(t.products.sale)+"件")])])]),o("div",{staticClass:"goods-content clear"},[o("div",{staticClass:"title"},[t._v("图文详情")]),o("div",{staticClass:"clear",domProps:{innerHTML:t._s(t.products.content)}},[t._v(" "+t._s(t.products.content)+" ")])])],1)],1),o("sku-action",{attrs:{goods:t.products,attribute:t.attribute,item:t.item,"goods-info":t.selectedGoodsInfo,fields:t.fields},on:{"update:goodsInfo":function(e){t.selectedGoodsInfo=e},"update:goods-info":function(e){t.selectedGoodsInfo=e}},model:{value:t.isSkuStatus,callback:function(e){t.isSkuStatus=e},expression:"isSkuStatus"}}),o("van-goods-action",{staticStyle:{"z-index":"100000"}},[o("van-goods-action-icon",{attrs:{replace:"",to:"/home",icon:"wap-home-o",text:"首页"}}),o("van-goods-action-icon",{attrs:{replace:"",to:"/cart/index",icon:"cart-o",text:"购物车",badge:t.cartCount}}),o("van-goods-action-icon",{attrs:{icon:"star",text:"收藏",color:t.collect},on:{click:t.favorite}}),o("van-goods-action-button",{attrs:{type:"warning",text:"加入购物车"},on:{click:t.onAddCartClicked}}),o("van-goods-action-button",{attrs:{type:"danger",text:"立即购买"},on:{click:t.onBuyClicked}})],1)],1)},i=[],n=(o("b0c0"),o("ac1f"),o("5319"),o("ade3")),c=(o("ef6f"),o("82a8")),r=(o("591c"),o("7713")),d=(o("93ac"),o("bb33")),u=(o("4b0a"),o("2bb1")),l=(o("7844"),o("5596")),f=(o("5246"),o("6b41")),h=(o("ab71"),o("58e6")),p=(o("66cf"),o("343b")),v=(o("e7e5"),o("d399")),b=o("2b0e"),m=o("85b3");v["a"].setDefaultOptions({duration:5e3}),b["a"].use(p["a"]);var g={name:"GoodsView",components:(s={},Object(n["a"])(s,h["a"].name,h["a"]),Object(n["a"])(s,f["a"].name,f["a"]),Object(n["a"])(s,l["a"].name,l["a"]),Object(n["a"])(s,u["a"].name,u["a"]),Object(n["a"])(s,d["a"].name,d["a"]),Object(n["a"])(s,r["a"].name,r["a"]),Object(n["a"])(s,c["a"].name,c["a"]),Object(n["a"])(s,m["a"].name,m["a"]),s),data:function(){return{fields:["id"],isSkuStatus:!1,images:[],collect:"#ccc",cartCount:0,current:0,isRefresh:!1,selectedGoodsInfo:{},products:{},attribute:[],item:{},clientHeight:window.outerHeight-50}},created:function(){var t=this.$storage.get("users",!0);this.cartCount=null!=t?t.shop_count:0,this.onLoad()},methods:{onLoad:function(){var t=this;this.$http.getGoodsDetail({id:this.$route.params.id}).then((function(e){t.collect=e.data.collect?"#ff5000":"#ccc",t.products=e.data.goods,t.attribute=e.data.attr,t.item=e.data.item,t.images=e.data.photo})).catch((function(e){t.$router.replace("/404")}))},favorite:function(){var t=this;this.$store.dispatch("isUsers").then((function(){t.$http.goodsDetailFavorite({id:t.$route.params.id}).then((function(e){e.status?t.collect=1==e.data?"#ff5000":"#ccc":Object(v["a"])(e.info)}))})).catch((function(){t.$storage.set("VUE_REFERER","/goods/view/"+t.$route.params.id),t.$router.push("/public/login")}))},onChange:function(t){this.current=t},onRefresh:function(){var t=this;setTimeout((function(){t.isRefresh=!1,t.onLoad()}),1500)},onBuyClicked:function(){var t=this;if(0!=this.isSkuStatus)return this.selectedGoodsInfo.isSubmit?void this.$store.dispatch("isUsers").then((function(){t.$router.push({path:"/cart/confirm",query:{id:t.selectedGoodsInfo.id,sku_id:t.selectedGoodsInfo.selectedSku.id,num:t.selectedGoodsInfo.num,type:"buy"}})})).catch((function(){t.$storage.set("VUE_REFERER","/goods/view/"+t.$route.params.id),t.$router.push("/public/login")})):(Object(v["a"])("请选择规格！"),!1);this.isSkuStatus=!0},onAddCartClicked:function(){var t=this;if(0!=this.isSkuStatus)return this.selectedGoodsInfo.isSubmit?void this.$store.dispatch("isUsers").then((function(){t.$http.goodsDetailAddCart({id:t.selectedGoodsInfo.id,sku_id:t.selectedGoodsInfo.selectedSku.id,num:t.selectedGoodsInfo.num}).then((function(e){t.isShow=!1,e.status?(t.cartCount=e.data.count,t.$store.commit("UPDATECART",e.data.count),Object(v["a"])(e.info)):Object(v["a"])(e.info)})).catch((function(t){Object(v["a"])("网络出错，请检查网络是否连接")}))})).catch((function(){t.$storage.set("VUE_REFERER","/goods/view/"+t.$route.params.id),t.$router.push("/public/login")})):(Object(v["a"])("请选择规格！"),!1);this.isSkuStatus=!0},prev:function(){this.$tools.prev()}}},_=g,k=(o("a69b"),o("2877")),C=Object(k["a"])(_,a,i,!1,null,"0ce22585",null);e["default"]=C.exports},e928:function(t,e,o){}}]);