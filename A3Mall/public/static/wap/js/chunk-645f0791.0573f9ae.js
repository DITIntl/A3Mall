(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-645f0791"],{1192:function(t,e,s){"use strict";s.r(e);var a,o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:"商品详情","left-arrow":"",fixed:!0,placeholder:!0,"z-index":9999},on:{"click-left":t.prev}}),s("div",{style:"height:"+t.clientHeight+"px"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefresh,callback:function(e){t.isRefresh=e},expression:"isRefresh"}},[s("van-swipe",{staticClass:"swiper-box",attrs:{autoplay:3e3},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[s("div",{staticClass:"custom-indicator"},[t._v(" "+t._s(t.current+1)+" / "+t._s(t.images.length)+" ")])]},proxy:!0}])},t._l(t.images,(function(t,e){return s("van-swipe-item",{key:e},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"image"}]})])})),1),s("div",{staticClass:"goods-info clear"},[s("div",{staticClass:"price"},[s("span",[t._v("￥"),s("i",[t._v(t._s(t.products.sell_price))])])]),s("div",{staticClass:"title"},[t._v(" "+t._s(t.products.title)+" ")]),s("div",{staticClass:"goods-info-box"},[s("span",[t._v("￥"),s("i",[t._v(t._s(t.products.market_price))])]),s("span",[t._v("库存: "+t._s(t.products.store_nums)+"件")]),s("span",[t._v("销量: "+t._s(t.products.sale)+"件")])])]),s("div",{staticClass:"goods-content clear"},[s("div",{staticClass:"title"},[t._v("图文详情")]),s("div",{staticClass:"clear",domProps:{innerHTML:t._s(t.products.content)}},[t._v(" "+t._s(t.products.content)+" ")])])],1)],1),s("van-sku",{attrs:{sku:t.sku,goods:t.goods,"goods-id":t.goodsId,quota:t.quota,"quota-used":t.quotaUsed,"hide-stock":t.sku.hide_stock,"show-add-cart-btn":!1},on:{"buy-clicked":t.onBuyClicked},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}}),s("van-goods-action",[s("van-goods-action-icon",{attrs:{replace:"",to:"/home",icon:"wap-home-o",text:"首页"}}),s("van-goods-action-icon",{attrs:{replace:"",to:"/cart/index",icon:"cart-o",text:"购物车",badge:t.cartCount}}),s("van-goods-action-icon",{attrs:{icon:"star",text:"收藏",color:t.collect},on:{click:t.favorite}}),s("van-goods-action-button",{attrs:{type:"danger",text:"立即购买"},on:{click:t.skuShow}})],1)],1)},i=[],c=(s("b0c0"),s("ade3")),n=(s("e415"),s("2b5e")),r=(s("ef6f"),s("82a8")),u=(s("591c"),s("7713")),d=(s("93ac"),s("bb33")),l=(s("4b0a"),s("2bb1")),p=(s("7844"),s("5596")),h=(s("5246"),s("6b41")),v=(s("ab71"),s("58e6")),f=(s("66cf"),s("343b")),g=(s("e7e5"),s("d399")),m=s("2b0e");s("2c09");g["a"].setDefaultOptions({duration:5e3}),m["a"].use(f["a"]);var _={name:"SpecialView",components:(a={},Object(c["a"])(a,v["a"].name,v["a"]),Object(c["a"])(a,h["a"].name,h["a"]),Object(c["a"])(a,p["a"].name,p["a"]),Object(c["a"])(a,l["a"].name,l["a"]),Object(c["a"])(a,d["a"].name,d["a"]),Object(c["a"])(a,u["a"].name,u["a"]),Object(c["a"])(a,r["a"].name,r["a"]),Object(c["a"])(a,n["a"].name,n["a"]),a),data:function(){return{images:[],isShow:!1,collect:"#ccc",cartCount:0,goodsId:1,quota:0,quotaUsed:0,sku:{tree:[],list:[],price:"0.00",stock_num:0,collection_id:0,none_sku:!1,hide_stock:!1},goods:{picture:""},current:0,isRefresh:!1,activityId:0,products:{title:"",sell_price:"",market_price:"",store_nums:"",sale:"",content:""},clientHeight:window.outerHeight-50}},created:function(){var t=this.$storage.get("users",!0);this.cartCount=null!=t?t.shop_count:0,this.onLoad()},methods:{onLoad:function(){var t=this;this.$request.get("/special/view",{id:this.$route.params.id}).then((function(e){e.status&&(t.collect=e.data.collect?"#ff5000":"#ccc",t.products=e.data.goods,t.images=e.data.photo,t.goods.picture=e.data.goods.photo,t.goodsId=t.$route.params.id,t.sku=e.data.sku,t.activityId=e.data.activityId)}))},favorite:function(){var t=this;this.$store.dispatch("isUsers").then((function(){t.$request.get("/special/favorite",{id:t.$route.params.id}).then((function(e){e.status?t.collect=1==e.data?"#ff5000":"#ccc":Object(g["a"])(e.info)}))})).catch((function(){t.$storage.set("VUE_REFERER","/goods/view");t.$router.push("/public/login")}))},skuShow:function(){this.isShow=!0},onChange:function(t){this.current=t},onRefresh:function(){var t=this;setTimeout((function(){t.isRefresh=!1,t.onLoad()}),1500)},onBuyClicked:function(t){var e=this;this.$store.dispatch("isUsers").then((function(){e.$router.push({path:"/cart/confirm",query:{id:e.activityId,sku_id:t.selectedSkuComb.id,num:t.selectedNum,type:"special"}})})).catch((function(){e.$storage.set("VUE_REFERER","/goods/view");e.$router.push("/public/login")}))},prev:function(){this.$tools.prev()}}},b=_,k=(s("9dd4"),s("2877")),w=Object(k["a"])(b,o,i,!1,null,"ca46d0a8",null);e["default"]=w.exports},"5b7f":function(t,e,s){},"9dd4":function(t,e,s){"use strict";var a=s("5b7f"),o=s.n(a);o.a}}]);